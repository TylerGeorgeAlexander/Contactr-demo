<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contactr</title>
    <link
      rel="icon"
      href="/assets/Contactr-logos/coffeechat-icon.png?raw=true"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/style.css" />
  </head>

  <!-- Header / Navbar -->
  <header class="navbar-space">
    <nav class="navbar navbar-light bg-white navbar-bottom-shadow">
      <div class="container">
        <div class="row d-flex justify-content-between w-100">
          <div class="col"></div>
          <div class="col m-1 text-center d-flex justify-content-center">
            <a class="navbar-brand m-0" href="/">
              <img
                src="/assets/Contactr-logos/coffeechat-icon.png?raw=true"
                alt=""
                width="30"
                height="24"
                class="align-text-top text-center"
              />
              Contactr
            </a>
          </div>
          <div class="col text-end">
            <a
              href="/logout"
              class="btn btn-lg btn-danger btn-block navbar-right"
              role="button"
              >Logout</a
            >
          </div>
        </div>
      </div>
    </nav>
  </header>

  <body>
    <div
      class="fb-box-shadow rounded-corners p-4 m-4 text-center text-md-start"
    >
      <!-- Add a Company -->
      <div class="container">
        <div class="row">
          <div class="col col-12 text-center">
            <h2 class="text-center m-4">Companies</h2>
            <a href="companies/add" class="btn btn-lg btn-primary m-2"
              >Add Company</a
            >
          </div>
        </div>
      </div>

      <!-- Companies List -->
      <div class="container p-4 align-items-center mx-auto">
        <% companies.forEach(company => { %>
        <div class="row mb-3">
          <div class="card w-100">
            <div class="card-body">
              <h5 class="card-title">
                Company Name: <%= company.companyName %>
              </h5>
              <p class="card-text">
                Date Added: <%= company.dateAdded?.toLocaleDateString("en-US")
                %><br />
                Website:
                <a href="<%= company.url %>" target="_blank"
                  ><%= company.url %></a
                ><br />
                Role: <%= company.role %> <br />
                Role URL:
                <a href="<%= company.roleURL %>" target="_blank"
                  ><%= company.roleURL %></a
                ><br />
                Position Type: <%= company.position %><br />
                Source: <%= company.source %><br />
                Point of Contact: <%= company.pointOfContact.name %> - <%=
                company.pointOfContact.position %><br />
                Contact Email:
                <a href="mailto:<%= company.pointOfContact.email %>"
                  ><%= company.pointOfContact.email %></a
                ><br />
                Application Status: <%= company.application.applied ? "Applied"
                : "Not Applied" %><br />
                Application Date: <%=
                company.application.applyDate?.toLocaleDateString("en-US") %><br />
                Coffee Chat: <%= company.application.coffeeChat ? "Yes" : "No"
                %><br />
                Coffee Chat Date: <%=
                company.application.coffeeChatDate?.toLocaleDateString("en-US")
                %><br />
                Said Thanks: <%= company.application.saidThanks ? "Yes" : "No"
                %><br />
                Interview Date: <%=
                company.application.interviewDate?.toLocaleDateString("en-US")
                %><br />
                Follow-Up Date: <%=
                company.application.followUpDate?.toLocaleDateString("en-US")
                %><br />
                Comments: <%= company.comments %>
              </p>
              <!-- More company details here -->
              <div class="text-center">
                <a
                  href="/companies/edit/<%= company._id %>"
                  class="btn btn-secondary m-2"
                  >Edit</a
                >
                <button
                  class="del-company btn btn-danger m-2"
                  data-id="<%=company._id%>"
                >
                  Delete
                </button>
              </div>
            </div>
          </div>
        </div>
        <% }) %>
      </div>
    </div>

    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="/js/companies.js"></script>
  </body>
</html>
